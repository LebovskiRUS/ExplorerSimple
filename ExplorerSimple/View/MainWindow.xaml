<Window x:Class="ExplorerSimple.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewmodel="clr-namespace:ExplorerSimple.ModelView"
        Title="Проводник" Height="800" Width="1000"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="6">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#EEE" Padding="8" Margin="0,0,0,6">
            <TextBlock x:Name="CurrentPathText" 
               Text="{Binding CurrentPathWithLabel}" 
               FontWeight="Bold" 
               Padding="2">
                <TextBlock.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Копировать" Click="CopyPath_Click"/>
                    </ContextMenu>
                </TextBlock.ContextMenu>
            </TextBlock>
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="6"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Background="#FFF7F7F7" Padding="4">
                <TreeView x:Name="RecursTree"
                          ItemsSource="{Binding RootDirectories}"
                          SelectedItemChanged="RecursTree_SelectedItemChanged"
                          BorderThickness="0">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="TreeViewItem">
                            <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}"/>
                        </Style>
                    </TreeView.ItemContainerStyle>
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Directories}">
                            <TextBlock Text="{Binding Name}" Padding="4"/>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </Border>

            <GridSplitter Grid.Column="1" Width="6" HorizontalAlignment="Center" />

            <Border Grid.Column="2" Background="#FFF" Padding="4">
                <StackPanel>
                    <ListView ItemsSource="{Binding SelectedDirectory.Directories}" ScrollViewer.VerticalScrollBarVisibility="Auto" MaxHeight="400">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Имя Папок 📁" DisplayMemberBinding="{Binding Name}" Width="400"/>
                            </GridView>
                        </ListView.View>
                    </ListView>
                    <ListView ItemsSource="{Binding SelectedDirectory.Files}" ScrollViewer.VerticalScrollBarVisibility="Auto" MaxHeight="400" Margin="0,10,0,0">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Header="Имя файла 📄" DisplayMemberBinding="{Binding FileName}" Width="400"/>
                            </GridView>
                        </ListView.View>
                    </ListView>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Window>